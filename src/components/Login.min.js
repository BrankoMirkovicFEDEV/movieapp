import o,{useState as r}from"react";import{useAuth as t}from"./AuthContext";import{useNavigate as e}from"react-router-dom";import{toast as s}from"react-toastify";import"../Styles/Login.css";function Login(){let{login:o}=t(),i=e(),[a,n]=r(""),[l,p]=r(""),g=()=>{window.location.reload()},u=async r=>{r.preventDefault();try{let t=await fetch("http://localhost:5000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,password:l})});if(200===t.status){let e=await t.json();localStorage.setItem("token",e.token),s.success("Successful login",{position:"top-right",autoClose:3e3,hideProgressBar:!1,onClose(){o(),i("/Movies"),g()}})}else{let n=await t.json();s.error(n.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1})}}catch(p){console.error("Error during login:",p),s.error("An error occurred during login",{position:"top-right",autoClose:3e3,hideProgressBar:!1})}};return<div className="wrapperLogin">

      <h2 className="log">Login</h2>

      <form onSubmit={u}>

        <input className="input"type="text"placeholder="Username"value={a}onChange={o=>n(o.target.value)}autoComplete="current-password"/>

        <input className="input"type="password"placeholder="Password"value={l}onChange={o=>p(o.target.value)}autoComplete="current-password"/>



        <button className="login"type="submit">

          Login

        </button>

      </form>

    </div>}export default Login;