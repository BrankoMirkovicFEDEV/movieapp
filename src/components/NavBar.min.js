import o,{Fragment as r,useState as t,useEffect as i}from"react";import{CiSearch as e}from"react-icons/ci";import"../Styles/NavBarStyle.css";import"../Styles/Videos.css";import{Routes as s,Route as n,NavLink as a,useNavigate as c}from"react-router-dom";import{ToastContainer as f,toast as g}from"react-toastify";import m from"./Login";import p from"./Movies";import l from"./Pricing";import v from"./SignUp";import h from"./Trends";import $ from"./TvShows";import u from"./RegistrationForm";import d from"./Logout";import{useAuth as M}from"./AuthContext";import{AuthProvider as C}from"./AuthContext";import E from"./ContactUs";export const Container=o.createContext();function NavBar(){let{isLoggedIn:o,login:r,logout:e}=M(),[s,n]=t(""),[a,f]=t(!1),[m,p]=t(!0),l=c(),[v,h]=t(""),[$,u]=t(""),[d,C]=t(""),E=()=>{window.location.reload()};i(()=>{let o=localStorage.getItem("token");o&&r()},[r]);let L=async()=>{r(),E(),l("/Movies")},S=()=>{localStorage.removeItem("token"),e(),E(),l("/Movies")},y=async o=>{o.preventDefault();try{let r=await fetch("http://localhost:5000/api/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:v,password:$,username:d})});if(200===r.status)g.success("Successful registration!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,onClose(){f(!0),l("/Login")}});else{let t=await r.json();g.error(t.message,{position:"top-right",autoClose:3e3,hideProgressBar:!1})}}catch(i){console.error("Error during registration:",i),g.error("An error occurred during registration.",{position:"top-right",autoClose:3e3,hideProgressBar:!1})}};return<C >

      <Container.Provider value={{toggle:m,inputValue:s,setInputValue:n}}>

        <r >

          <f />

          <nav className={m?"":"navBarColor"}>

            <div className="nav-options">

              <h1 className=""id={m?"":"heading"}>

                VIDEOSITE

              </h1>

              <a to="/Movies"style={({isActive:o})=>({color:o?"#fff":"#EE9800"})}>

                <span id={m?"Movies":"MoviesLight"}> Movies </span>

              </a>

              <a to="/TvShows"style={({isActive:o})=>({color:o?"#fff":"#EE9800"})}>

                <span id={m?"Movies":"MoviesLight"}> Tv Shows </span>

              </a>

              <a to="/Trending"style={({isActive:o})=>({color:o?"#fff":"#EE9800"})}>

                <span id={m?"Movies":"MoviesLight"}> Trending </span>

              </a>

              <a to="/Pricing"style={({isActive:o})=>({color:o?"#fff":"#EE9800"})}>

                <span id={m?"Movies":"MoviesLight"}> Pricing </span>

              </a>

              <a to="/ContactUs"style={({isActive:o})=>({color:o?"#fff":"#EE9800"})}>

                <span id={m?"Movies":"MoviesLight"}> Contact us </span>

              </a>

              {o?<span onClick={()=>{S(),l("/Movies")}}style={{color:"#fff",cursor:"pointer"}}>

                  Logout

                </span>:<r >

                  <a to="/Login"style={({isActive:r})=>({color:r?"#fff":"#EE9800",display:o?"none":"block"})}>

                    <span id={m?"Movies":"MoviesLight"}>Login</span>

                  </a>

                  <a to="/SignUp"style={({isActive:r})=>({color:r?"#fff":"#EE9800",display:o?"none":"block"})}>

                    <span style={{display:o?"none":"block"}}id={m?"Movies":"MoviesLight"}>

                      Sign up

                    </span>

                  </a>

                </r>}

            </div>

            <div className="input-group">

              <input className="search-input"type="text"placeholder="Search for movies or shows"value={s}onChange={o=>n(o.target.value)}/>

              <e fontSize={21}color="green"id="search"/>

              <div id="Color-switcher"onClick={()=>p(!m)}>

                <div id={m?"Color-switcher-mover":"Color-switcher-moved"}></div>

              </div>

            </div>

          </nav>



          <s >

            <n path="/"element={<p />}/>

            <n path="/Movies"element={<p />}/>

            <n path="/TvShows"element={<$ />}/>

            <n path="/Trending"element={<h />}/>

            <n path="/Pricing"element={<l />}/>

            <n path="/Login"element={<m handleLogin={L}/>}/>

            <n path="/SignUp"element={<v handleRegister={y}/>}/>

            {o&&<n path="/Logout"element={<d handleLogout={S}/>}/>}

            <n path="/RegistrationForm"element={<u />}/>

            <n path="/ContactUs"element={<E />}/>

          </s>

        </r>

      </Container.Provider>

    </C>}export default NavBar;